iOS Akademija

# Predavanja / 07



---

# iOS dev

## Table Views

[UITableView](https://developer.apple.com/reference/uikit/uitableview) i [UITableViewCell](https://developer.apple.com/reference/uikit/uitableviewcell) su dve centralne klase vezane za tabelarni prikaz ili taÄnije reÄeno za liste.

Druga dva stuba su dva protokola: [UITableViewDataSource](https://developer.apple.com/reference/uikit/uitableviewdatasource) i [UITableViewDelegate](https://developer.apple.com/reference/uikit/uitableviewdelegate).

KonaÄno, poslednji i po mom miÅ¡ljenju kljuÄni koncept jeste *reusability* `UITableViewCell` instanci.

<small>Zbunjeni/uplaÅ¡eni veÄ‡? ğŸ¤” Polako, ima joÅ¡. ğŸ˜‰</small>

> Obavezno Äitanje: [Table View Programming Guide](https://developer.apple.com/library/content/documentation/UserExperience/Conceptual/TableView_iPhone/AboutTableViewsiPhone/AboutTableViewsiPhone.html) for iOS


Korisni tutorijali po webu:

* iOS From Scratch With Swift: [Table View Basics](https://code.tutsplus.com/tutorials/ios-from-scratch-with-swift-table-view-basics--cms-25160)




## UserDefaults

[UserDefaults](https://developer.apple.com/reference/foundation/userdefaults) je system-wide storage za smeÅ¡taj raznih podeÅ¡avanja.

Koristi se trivijalno:

```swift
let defs = UserDefaults.standard
defs.string(forKey: â€œSOMETHINGâ€)
defs.set(â€œEURâ€, forKey: â€œSOMETHINGâ€)
```





## URLSession & network friends

* [URL Session Programming Guide](https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/URLLoadingSystem/URLLoadingSystem.html#//apple_ref/doc/uid/10000165i)

* [Using NSURLSession](https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/URLLoadingSystem/) - kako se ceo ovaj framework koristi.

Dodatna literatura:

* [About Networking](https://developer.apple.com/library/ios/documentation/NetworkingInternetWeb/Conceptual/NetworkingOverview/Introduction/Introduction.html) je opÅ¡te uputstvo vezano za networking. Vredi prelistati.

### Reference za spomenute klase

* [URLSession](https://developer.apple.com/reference/foundation/urlsession) framework - proÄitajte *detaljno* da se upoznate sa ovim podsistemom.

* [URLSessionDataTask](https://developer.apple.com/reference/foundation/urlsessiondatatask)

* [URL](https://developer.apple.com/reference/foundation/url)

* [URLResponse](https://developer.apple.com/reference/foundation/urlresponse) i [HTTPURLResponse](https://developer.apple.com/reference/foundation/httpurlresponse)

Pogledajte i _Related Documentation_ link sa strane.


### Valute app

KoristiÄ‡emo nezvaniÄni Yahoo Finance API:

`https://download.finance.yahoo.com/d/quotes.csv?f=sb&s=USDGBP=X,USDEUR=X`

Koji vraÄ‡a rezultat u obliku:

```
"USDGBP=X",0.7063
"USDEUR=X",0.8875
```



--- 

# Essentials

## MVC = Model View Controller design pattern

Appleova [dokumentacija za MVC](https://developer.apple.com/library/ios/documentation/General/Conceptual/CocoaEncyclopedia/Model-View-Controller/Model-View-Controller.html) je priliÄno teÅ¡ka za Äitanje.

[Jedno od boljih objaÅ¡njenja](http://mobileoop.com/programming-in-ios-with-objective-c-using-mvc) Å¡ta je MVC, mada je iz 2013-e pa samim i vezano za Objective-C


#### MVC u suÅ¡tini

* View treba da se bavi samo prikazom. Nikada niÅ¡ta ne treba sam da dohvata od podataka, sve mu se servira sa strane
* Model ne treba nikada da se bavi prikazom, niti da uopÅ¡te razmatra prikaz kao takav. Bavi se podacima i njihovim izvedenim formama; na primer, ako imate datum, onda model moÅ¾e da sadrÅ¾i i metod koji formatira taj datum. 
* Controller je veza izmeÄ‘u ta dva. On preuzima podatke od modela i prosleÄ‘uje ih view-u za prikaz

#### Implementacija u Valute app

* UIViewController = **C**ontroller u ovoj priÄi
* UIView == UI**V**iew u ovoj priÄi
* Å ta je **M**odel? 

U jednostavnim implementacijama, *UIVC takoÄ‘e moÅ¾e predstavljati Model*. Striktno gledano - to bi trebalo da je neki drugi objekat sa svojim public methodama kojima UIVC moÅ¾e da pristupi.

Definicija View-a, tj. njegovih labela i drugih kontrola ne treba da slepo prati Model. NajÄeÅ¡Ä‡e to u praksi nije nigde sluÄaj, zbog toga postoji ovaj podela na 3 oblasti.



## Singleton pattern

Poslednji znaÄajan pattern koji Ä‡emo raditi. Prisutan je svuda po iOS frameworcima:

* URLSession.shared
* FileManager.default
* AVAudioSession.shared

FantastiÄan blog post na ovu temu: [The Right Way to Write a Singleton](http://krakendev.io/blog/the-right-way-to-write-a-singleton) by Hector Matos

U praksi:

1. DeklariÅ¡ete klasu
2. NapiÅ¡ete statiÄku konstantu Äija je vrednost instanca te same klase
3. Sakrijete sve moguÄ‡e `init` methode iza `private`, *ako* je neophodno

```
class SomethingManager {
	static let shared = SomethingManager()
	private init() {
		//	 ...
	}
}
```


